<!doctype html>
<html>
<head>
    {% load static %}
    <meta charset="UTF-8">
	<title>Pop Corn|Forgot Password</title>
	<link rel='stylesheet' href="{% static 'css/bootstrap.css' %}">
	<link rel="shortcut icon" type="image/x-icon" href="{% static "favicon.ico" %}" />
	<link rel='stylesheet' href="{% static 'css/sign_in_up_css.css' %}">

</head>

<body>
    <div id="final_message"></div>
    <form class="col-md-4 col-md-offset-4 sign_form" id="email_form">
        <div class="form-group">
            <label for="email_address">Your email address:</label>
            <div id="error_message"></div>
            <input type="email" class="form-control" id="email_address" placeholder="Your email">
        </div>
        <button type="submit" class="btn btn-primary" id="pass_reset">Send me password-reset email</button>
    </form>
    <div class="col-md-4 col-md-offset-4">
        <div><a href="sign_in.html">Return to the sign-in page.</a></div>
    </div>

<script>
    var button = document.getElementById('pass_reset');
    button.onclick = function(event) {
        //event.preventDefault();
        var email = document.querySelector("#email_address").value;
        var m = validate_email(email);
        if(m != null) {
            event.preventDefault();
            var t = document.createTextNode(m);
            document.querySelector("#error_message").appendChild(t);
            document.querySelector("#error_message").style.color = 'red';
        }
        else
            window.alert('We\'ll soon send you a password-reset email.');
        /*var d = document.createElement('div');
        var mess = document.createTextNode('We\'ll soon send you a password-reset email.');
        d.appendChild(mess);
        d.style.color = "Green";
        var fm = document.getElementById('final_message');
        fm.appendChild(d);*/
    }

    function validate_email(email) {
        var re = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if(!re.test(email))
            return "Your email address isn't valid.";
    }

</script>

</body>
</html>